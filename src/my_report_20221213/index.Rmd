--- 
title: "My first bookdown: read and visualize geese catch data"
author: 
- "INBO coding club core team"
- "INBO coding club foundation"
- "Friends of the INBO coding club"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
documentclass: book
github-repo: inbo/coding-club
output:
  bookdown::gitbook:
    number_sections: true
    df_print: paged
    split_by: rmd
    code_folding: show
---


```{r index-setup, include = FALSE}
knitr::opts_chunk$set(
  echo = TRUE, # Include code from output by default
  tidy = 'styler', # see intermezzo 1
  rownames.print = FALSE # Something new: option for df_print = paged
)
```

This document contains a small book/report in a specific bookdown format: the `gitbook`. Notice that this is the format used to write the [documentation](https://bookdown.org/yihui/bookdown/) of bookdown itself!

You can try of course the output format mentioned in BONUS challenge: the `html_document2`: it's very basic and will generate a unique html, while gitbook generates an html per chapter (saved in `./docs`  as defined in the `_bookdown.yml` because I prefer to store Rmd and html files neatly separately).

The report is divided in several chapters:

- read, explore and clean geese catch data (chapters \@ref(read-data), \@ref(explore-data) and \@ref(preprocess-data))
- visualize and model the cleaned data (chapters \@ref(static-plots) and \@ref(dynamic-maps))

The chapters are written as separate Rmarkdown documents which are very similar to the original ones written as solutions of Challenge 1 and 2. Main changes:

1. The YAML header is removed from the two Rmd documents as it is replaced by the YAML configuration file, `_bookdown.yml` and the YAML header of this file, `index.Rmd`.
3. The packages are loaded only once and it is typically done in this introductory `index.Rmd`
4. Specific configuration lines about the table of contents (`toc: true`,  `toc_depth: 3`, etc. ) are removed as a `gitbook` has its own TOC style, which are actually very nice. Do you want to tune your report? Then choose  another output, like `bookdown::html_book:`, and choose one of the many styles available or import other specific style via `css` file. On documentation, you can read more about [theming](https://bookdown.org/yihui/bookdown/theming.html) and you can play with it if you want. 
5. Figure captions added by  `fig.cap="my beautiful caption` in the chunk header. 
6. Cross-references to figures and sections added via `\@ref(chunkname)` or `\@ref(seciton-name-lowercase-dash-instead-of-space)`. More in [cross-references](https://bookdown.org/yihui/bookdown/cross-references.html#cross-references) section of bookdown documentation. Notice that not only output `html_document2`, but also `gitbook` output allows cross-references, as well.
6. Chunk labels must be unique along the entire _book_, not only along the R Markdown they belong to. Otherwise error arises: `> Duplicate chunk label 'species'; which has been used for the chunk: `.
7. To allow you to download all files for this bookdown project via `inborutils::setup_codingclub_session("my_report_20211216")`, we had to put both data and R Markdown files in the same root folder. However, we really recommend to distinguish them by putting them in two different subfolders of your bookdown project: `./data` and `./src`. The only Rmd file which needs to stay in root folder is `index.Rmd`.


Load packages. I set `warning=FALSE` and `message=FALSE` to this specific chunk of code to not show all warnings and messages you get while loading the packages (see challenge 1):

```{r load-pkgs, warning=FALSE, message=FALSE}
library(tidyverse)    # to do datascience
library(geepack)      # to do modelling
library(INBOtheme)    # to apply INBO style to graphs
library(sf)           # to work with geospatial vector data
library(leaflet)      # to make dynamic maps
library(htmltools)    # to make nice html labels for dynamic maps
library(here)         # to work with paths
```
