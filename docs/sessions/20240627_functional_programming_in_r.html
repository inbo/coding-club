---
layout: presentation
title: functional programming in R
---

class: center, middle

![:scale 30%]({{ site.baseurl}}/assets/images/coding_club_logo_1.png)

<!-- Do not forget to adapt the presentation title in the header! -->

<!-- Adjust the presentation to the session. Focus on the challenges,
    this is not a coding tutorial.

    Note, to include figures, store the image in the `/docs/assets/images/yyyymmdd/`
    folder and use the jekyll base.url reference as done in this template
    or see https://jekyllrb.com/docs/liquid/tags/#links.
    using the scale attribute ![:scale 30%](...), you can adjust the image size.
-->

<!--  Adjust the day, month  -->
# 27 JUNE 2024

## INBO coding club

<!--  Adjust the room number and name  -->
Herman Teirlinck Building

01.70 - Ferdinand Peters

---
class: left, top

# Reminders

1. Did we confirm the room reservation on the _roomie_?
2. Did we start the recording?


---
class: center, middle

<!-- Create a new badge using Inkscape or other programs based on the assets/images/coding_club_badges.svg file -->
![:scale 90%]({{ site.baseurl}}/assets/images/20240627/20240627_badge_functional.png)

---
class: left, top

## Functional programming

There are 3 main programming paradigms: procedural programming, object-oriented programming and functional programming.

- Functional programming: _"wrap up for-loops in a function, and call that function instead of using the for-loop directly"_, [R for Data Science](https://r4ds.had.co.nz/iteration.html#for-loops-vs.functionals)

There are three best practices that you should generally follow*:

- Your functions should accept at least one argument.

- Your functions should return data, or another function.

- Don’t use loops! Loops declare a procedure = procedural programming

Do you know that you are doing functional programming everytime you use the pipes (`%>%` from tidyverse or the new `|>` from R 4.0)?

<small> __\* Source__: From blogpost [Functional Programming 101 -
A DEEP DIVE ON THE BENEFITS OF FUNCTIONAL PROGRAMMING AND WHY IT’S ACTUALLY EASIER THAN YOU THINK](https://github.com/readme/guides/functional-programming-basics).

---
class: left, top

## Functional programming and R

- R is basically a functional language: "_it lends itself to a style of problem solving centred on functions_"*.

- Functional programming in basic R: `apply()`, `lapply()`, `tapply()`.

- The [purrr](https://purrr.tidyverse.org) package provides a complete and consistent set of tools.

- The most important purrr function? `map()`!

<center>![:scale 30%]({{ site.baseurl}}/assets/images/20200630/20200630_purrr_logo.png)<br></center>


<small> __\* Source__: Nobody teaches R better than Hadley Wickham, I think. The chapter [**Functional programming**](https://adv-r.hadley.nz/fp.html#fp) from his great [Advanced R](https://adv-r.hadley.nz/index.html) book. A must reading for our summer!

---
class: left, top

## Functional programming: why?

But why doing functional programming?

Are purrr's functions or apply() functions faster than loops? Not necessarily! It's just another way of programming. And it's a question of clarity: **code is easier to write and to read**.

[Bjarne Stroustrup](https://en.wikipedia.org/wiki/Bjarne_Stroustrup), the developer of C++ programming language: "_To become significantly more reliable, code must become more transparent. In particular, nested conditions and loops must be viewed with great suspicion. Complicated control flows confuse programmers. Messy code often hides bugs._""

To "forget" loops and become a functional programmer, you need first a little of practice, and here we are: doing some purrr "fitness" exercises at the INBO coding _gym_ club.

---
class: left, top

## Functionals: the `map()` function

A **functional** is a function that takes a function as an input and returns a vector as output.

`apply()`, `lapply()`, `tapply()`, `map()`: they are all examples of **functionals**.


```r
plus_two <- function(x) x + 2
map(1:3, plus_two)
#> [[1]]
#> [1] 3
#>
#> [[2]]
#> [1] 4
#>
#> [[3]]
#> [1] 5
```

![:scale 70%]({{ site.baseurl}}/assets/images/20240627/20240627_map.png)
<br><small>Source: Hadley Wickham, https://adv-r.hadley.nz/functionals.html</small>

---
class: left, top

## The `map()` function

Why `map()` is called map? It refers to the math concept of _map_ or [_mapping_](https://en.wikipedia.org/wiki/Map_(mathematics)), which is quite a synonym of function, i.e. an operation that associates each element of a set with one or more elements of another set.

![:scale 70%]({{ site.baseurl}}/assets/images/20240627/20240627_Function_color_example_3.png)

<small> __\* Source__: by Function_color_example_3.gif: Wvbailey. The original uploader was Wvbailey at English Wikipedia.derivative work: Zerodamage - This file was derived from: Function color example 3.gif:, CC BY-SA 3.0, https://commons.wikimedia.org/w/index.php?curid=20802095

---
class: left, top

Install packages: (maybe not needed)

```r
install.packages("tidyverse")
```

Load the packages:

```r
library(tidyverse)
```

---
class: center, top

![:scale 100%]({{ site.baseurl}}/assets/images/20240627/20240627_purrr_cheat_sheet.png)<br>

Download and use the [purrr cheatsheet](https://github.com/inbo/coding-club/blob/main/cheat_sheets/20240425_cheat_sheet_purrr.pdf). [Online version](https://rstudio.github.io/cheatsheets/html/purrr.html) available as webpage. Also pdf in other 6 languages.

---
class: left, top

## How to get started?

Check the [Each session setup](https://inbo.github.io/coding-club/gettingstarted.html#each-session-setup) to get started.

## First time coding club?

Check the [First time setup](https://inbo.github.io/coding-club/gettingstarted.html#first-time-setup) section to setup.

---
class: left, top

![:scale 100%]({{ site.baseurl}}/assets/images/coding_club_sticky_concept.png)

---
class: center, top

# Share your code during the coding session

<!-- Create a new hackmd file and replace this link (twice!) -->
Go to https://hackmd.io/p2UZHhNaSgSG649TO3LgJg?edit and start by adding your name in section "Participants".

<iframe src="https://hackmd.io/p2UZHhNaSgSG649TO3LgJg?edit" height="450px" width="800px"></iframe>


---
class: left, top

# Download data and code

You can download the material of today:

- automatically via `inborutils::setup_codingclub_session()`*

- manually** from GitHub folders [coding-club/data/20240627](https://github.com/inbo/coding-club/tree/master/data/20240627) and [coding-club/src/20240627](https://github.com/inbo/coding-club/tree/master/src/20240627)

<br>
<small> __\* Note__: you can use the date in "YYYYMMDD" format to download the coding club material of a specific day, e.g. run `setup_codingclub_session("20220428")` to download the coding club material of April, 28 2022. If date is omitted, i.e. `setup_codingclub_session()`, the date of today is used. For all options, check the [tutorial online](https://inbo.github.io/tutorials/tutorials/r_setup_codingclub_session/).</small>
<br>
<small> __\*\* Note__: check the getting started instructions on [how to download a single file](https://inbo.github.io/coding-club/gettingstarted.html#each-session-setup)</small>

---
class: left, top

# Data and scripts description

## Data



## Scripts

- `20240627_challenges.R`: R script to start with.

---
background-image: url({{ site.baseurl}}/assets/images/background_challenge_1.png)
class: left, top

# Challenge 1

Using the cheatsheet and starting from the code provided in `20240627_challenges.R`:



---
background-image: url({{ site.baseurl}}/assets/images/background_challenge_2.png)
class: left, top

# Challenge 2



---
background-image: url({{ site.baseurl}}/assets/images/background_challenge_3.png)
class: left, top

# Challenge 3



---
class: left, top

# Bonus challenge



---
class: left, top

# The package of the month.



---
class: left, top

# Resources

- Challenges solutions and edited video recording will be available soon
- [purrr](https://r-spatial.github.io/sf/) package homepage.
- [purrr cheatsheet](https://rstudio.github.io/cheatsheets/html/purrr.html) webpage
- The [Advanced R](https://adv-r.hadley.nz/index.html) book of Hadley Wickham: the [Introduction](https://adv-r.hadley.nz/fp.html) to the chapter and the entire [chapter 9](https://adv-r.hadley.nz/functionals.html#functionals) about functional programming. This resource was extensively used to introduce the concepts and to write the challenges.


---
class: center, middle

Enjoy the summer! No INBO coding club in July!

---
class: center, middle

![:scale 30%]({{ site.baseurl}}/assets/images/coding_club_logo_1.png)

<!--  Adjust the room number and name  -->
Topic: to be decided <br>
Room:  HT - 01.21 - Jeanne Brabants <br>
Date: **27/08/2024**, from **10:00** to **12:30** <br>
Help needed with technical setup? You are welcom from **9:45am**
